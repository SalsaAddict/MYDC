"use strict";var Carrera,car;(function(n){var i,r,t,u,f,e;(function(n){n[n.route=0]="route";n[n.scope=1]="scope";n[n.value=2]="value"})(n.ParameterType||(n.ParameterType={}));i=n.ParameterType,function(n){n[n.manual=0]="manual";n[n.auto=1]="auto";n[n.once=2]="once"}(n.RunType||(n.RunType={}));r=n.RunType,function(n){n[n.array=0]="array";n[n.singleton=1]="singleton";n[n.object=2]="object"}(n.ModelType||(n.ModelType={}));t=n.ModelType;u=function(){function n(n,t,r,u){u===void 0&&(u=!1);this.name=n;this.type=t?t:r?i.value:i.route;this.value=r?r:this.type===i.route?n:null;this.required=u}return n}();n.Parameter=u;f=function(){function n(n,i,u,f,e){var o=this;i===void 0&&(i=r.manual);this.parameters=[];this.empty=function(){return o.model?o.modelType===t.array?[]:{}:undefined};this.name=n;this.runType=i;this.model=u?u:undefined;this.modelType=u?f?f:e?t.object:t.array:undefined;this.objectRoot=this.modelType===t.object?this.objectRoot?e:undefined:undefined}return n}();n.Procedure=f,function(t){var u=function(){function n(n,t){var i=this;this.$scope=n;this.$parse=t;this.addProcedure=function(n,t){i.$scope.procedures[t||n.name]=n;n.model&&i.$parse(n.model).assign(i.$scope.$parent,n.empty())};this.removeProcedure=function(n){if(angular.isDefined(i.$scope.procedures[n])){var t=i.$scope.procedures[n];t.model&&i.$parse(t.model).assign(i.$scope.$parent,undefined);delete i.$scope.procedures[n]}};this.$scope.procedures={}}return n.$inject=["$scope","$parse"],n}(),i,r;t.Main=u;i=function(){function t(t){var i=this;this.$scope=t;this.addParameter=function(n){i.$scope.procedure.parameters.push(n)};this.removeParameter=function(n){var t=i.$scope.procedure.parameters.indexOf(n);t>=0&&i.$scope.procedure.parameters.splice(t,1)};this.$scope.procedure=new n.Procedure(this.$scope.name,n.RunType[angular.lowercase(this.$scope.runType)],this.$scope.model,n.ModelType[angular.lowercase(this.$scope.modelType)],this.$scope.objectRoot)}return t.$inject=["$scope"],t}();t.Procedure=i;r=function(){function t(t){this.$scope=t;this.$scope.parameter=new n.Parameter(t.name,n.ParameterType[angular.lowercase(t.type)],t.value,angular.lowercase(t.required)==="true")}return t.$inject=["$scope"],t}();t.Parameter=r}(e=n.Controllers||(n.Controllers={}))})(Carrera||(Carrera={}));car=angular.module("carrera",["templates/carreraTransclude.html"]);car.directive("car",["$log",function(n){return{restrict:"E",templateUrl:"templates/carreraTransclude.html",transclude:!0,scope:{},controller:Carrera.Controllers.Main,link:function(t){t.$watchCollection("procedures",function(i,r){i!==r&&n.debug(JSON.stringify(t.procedures))})}}}]);car.directive("carProc",["$log",function(){return{restrict:"E",templateUrl:"templates/carreraTransclude.html",transclude:!0,scope:{name:"@",alias:"@",runType:"@run",model:"@",modelType:"@type",objectRoot:"@root"},controller:Carrera.Controllers.Procedure,require:"^^car",link:function(n,t,i,r){r.addProcedure(n.procedure,n.alias);n.$on("$destroy",function(){r.removeProcedure(n.alias||n.procedure.name)})}}}]);car.directive("carParam",["$log",function(){return{restrict:"E",templateUrl:"templates/carreraTransclude.html",transclude:!0,scope:{name:"@",type:"@",value:"@",required:"@"},controller:Carrera.Controllers.Parameter,require:"^^carProc",link:function(n,t,i,r){r.addParameter(n.parameter);n.$on("$destroy",function(){r.removeParameter(n.parameter)})}}}]);angular.module("templates/carreraTransclude.html",[]).run(["$templateCache",function(n){n.put("templates/carreraTransclude.html","<ng-transclude><\/ng-transclude>")}]);
//# sourceMappingURL=carrera.min.js.map
